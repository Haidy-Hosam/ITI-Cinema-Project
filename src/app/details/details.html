<div class="container mt-4" *ngIf="movie">
  <div class="row">
    <!-- Poster -->
    <div class="col-md-4">
      <img [src]="'https://image.tmdb.org/t/p/w500/' + movie.poster_path" 
           class="img-fluid rounded shadow" alt="{{movie.title}}">
    </div>

    <!-- Movie Details -->
    <div class="col-md-8">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h2>{{ movie.title }}</h2>
          <small class="text-muted">{{ movie.release_date }}</small>
        </div>
        <i class="bi"
           [ngClass]="{
              'bi-heart-fill liked': favorites.includes(movie),
              'bi-heart': !favorites.includes(movie)
           }"
           [style.color]="favorites.includes(movie) ? 'gold' : 'gray'"
           style="cursor: pointer; font-size: 2rem;"
           (click)="toggleFavorite(movie)">
        </i>
      </div>

      <!-- â­ User Rating -->
      <div class="rating mt-2">
        <i *ngFor="let star of [1,2,3,4,5]" 
           class="bi"
           [ngClass]="{
              'bi-star-fill text-warning': star <= userRating,
              'bi-star text-muted': star > userRating
           }"
           (click)="setRating(star)"
           style="cursor: pointer; font-size: 1.5rem; margin-right: 5px;">
        </i>
        <small class="text-muted ms-2">Your Rating: {{userRating}} / 5</small>
      </div>

      <!-- Overview -->
      <p class="mt-3">{{ movie.overview }}</p>

      <!-- Genres -->
      <div class="mb-3">
        <span class="badge" *ngFor="let genre of movie.genres" [ngClass]="genre.toLowerCase()">
          {{ genre }}
        </span>
      </div>

      <!-- Extra Info -->
      <p>
        <strong>Duration:</strong> {{ movie.runtime }} Mins <br>
        <strong>Language:</strong> {{ movie.original_language | uppercase }}
      </p>

      <br>
      <a [href]="movie.homepage" target="_blank" class="btn btn-outline-primary btn-sm mt-2">
        Website
      </a>
    </div>
  </div>

  <!-- Recommendations -->
  <div class="recommendations mt-5" *ngIf="recommendations.length > 0">
    <h4>Recommendations</h4>
    <div class="row row-cols-1 row-cols-md-6 g-4">
      <div class="col" *ngFor="let rec of recommendations">
        <div class="card h-100">
          <a [routerLink]="['/details', rec.id]" style="text-decoration: none; color: inherit;">
            <img [src]="'https://image.tmdb.org/t/p/w500/' + rec.poster_path"
                 class="card-img-top" alt="{{rec.title}}">
            <div class="card-body">
              <h6 class="card-title">{{rec.title}}</h6>
              <p class="text-muted small">{{rec.release_date}}</p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
